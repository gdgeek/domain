{% extends "base.html" %}

{% block title %}环境变量检查{% endblock %}

{% block content %}
<div class="page-header">
    <h1>环境变量检查</h1>
    <p class="text-muted">当前运行环境的配置状态</p>
</div>

{% for group_name, vars in groups.items() %}
<div class="card mb-4">
    <div class="card-header">
        <h5 class="mb-0">{{ group_name }}</h5>
    </div>
    <div class="card-body p-0">
        <table class="table table-striped mb-0">
            <thead>
                <tr>
                    <th style="width: 200px;">变量名</th>
                    <th style="width: 80px;">状态</th>
                    <th style="width: 80px;">必填</th>
                    <th style="width: 150px;">当前值</th>
                    <th style="width: 120px;">默认值</th>
                    <th>说明</th>
                </tr>
            </thead>
            <tbody>
                {% for var in vars %}
                <tr>
                    <td><code>{{ var.name }}</code></td>
                    <td>
                        {% if var.is_set %}
                        <span class="badge bg-success">已设置</span>
                        {% else %}
                        <span class="badge bg-secondary">未设置</span>
                        {% endif %}
                    </td>
                    <td>
                        {% if var.required %}
                        <span class="badge bg-danger">必填</span>
                        {% else %}
                        <span class="badge bg-info">选填</span>
                        {% endif %}
                    </td>
                    <td><code>{{ var.display }}</code></td>
                    <td><code>{{ var.default }}</code></td>
                    <td>{{ var.desc }}</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
</div>
{% endfor %}

<div class="alert alert-info">
    <strong>提示：</strong>
    <ul class="mb-0">
        <li>数据库配置可以使用 <code>DATABASE_URL</code> 或分开的 <code>DB_*</code> 变量</li>
        <li>Redis 配置可以使用 <code>REDIS_URL</code> 或分开的 <code>REDIS_*</code> 变量</li>
        <li>敏感信息（密码、密钥）不会显示具体值</li>
    </ul>
</div>
{% endblock %}
